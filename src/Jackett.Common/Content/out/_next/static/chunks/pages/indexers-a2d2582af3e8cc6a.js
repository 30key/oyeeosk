(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{29361:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/indexers",function(){return t(73931)}])},8281:function(n,e,t){"use strict";t.d(e,{ue:function(){return u},v_:function(){return d},S2:function(){return a},Od:function(){return f},Ek:function(){return l}});var r=t(8100),i=t(47568),o=t(70655);function c(n,e){return s.apply(this,arguments)}function s(){return(s=(0,i.Z)(function(n,e){var t;return(0,o.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch(n,e)];case 1:return[2,t.sent().json()]}})})).apply(this,arguments)}var u="/api/v2.0",a=["Audio","Books","Console","Movies","Other","PC","TV","XXX",];function l(n,e){var t=(0,r.ZP)(u+n,c,{revalidateIfStale:e,revalidateOnFocus:e,revalidateOnReconnect:!0}),i=t.data,o=t.error;return{data:i,loading:!o&&!i,error:o}}function d(n,e){return c(u+n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function f(n){return c(u+n,{method:"DELETE"})}},13512:function(n,e,t){"use strict";t.d(e,{IN:function(){return c},Lt:function(){return o},iC:function(){return i}});var r=t(8281);function i(n){return(0,r.Ek)("/server/config",n)}function o(n){return(0,r.v_)("/server/config",n)}function c(n){return(0,r.v_)("/server/adminpassword",n)}},38424:function(n,e,t){"use strict";t.d(e,{D9:function(){return u},bn:function(){return c},fZ:function(){return i},m9:function(){return s},mS:function(){return o}});var r=t(8281);function i(){return(0,r.Ek)("/indexers",!0)}function o(n){return(0,r.Ek)("/indexers/".concat(n,"/config"),!1)}function c(n,e){return(0,r.v_)("/indexers/".concat(n,"/config"),e)}function s(n){return(0,r.Od)("/indexers/".concat(n))}function u(n){return fetch("".concat(r.ue,"/indexers/").concat(n,"/test"),{method:"POST"}).then(function(n){return Promise.resolve(n.status>=200&&n.status<=299?{result:"success"}:n.json())}).catch(function(n){return Promise.resolve({result:"error",error:n})})}},23171:function(n,e,t){"use strict";t.d(e,{Z:function(){return v}});var r=t(85893),i=t(23492),o=t(9336),c=t(41761);function s(n){var e=n.children;return(0,r.jsx)(c.Z.Container,{justify:"center",marginTop:"1.5rem",children:(0,r.jsx)(c.Z,{lg:14,children:e})})}var u=t(41799),a=t(69396),l=t(9476),d=t(3894),f=t(49759),h=t(78334),x=t(11163);function p(n){var e=n.pages,t=(0,x.useRouter)(),i="".concat(e.findIndex(function(n){return n.name==t.pathname.slice(1)})),o=(0,l.Z)(i),s=o.setState,p=o.bindings;return p.onChange=function(n){t.push("/".concat(e[Number(n)].name))},(0,d.ZP)(function(n){var t;if(!n.ctrlKey&&!n.altKey&&!n.metaKey&&!n.shiftKey&&(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="INPUT"){var r="".concat(e.findIndex(function(e){var t;return(null===(t=e.keybind)||void 0===t?void 0:t.toLowerCase())==n.key}));s(r),p.onChange(r),n.preventDefault()}},e.filter(function(n){return void 0!=n.keybind}).map(function(n){return n.keybind.toUpperCase().charCodeAt(0)}),{preventDefault:!1}),(0,r.jsx)(c.Z.Container,{justify:"center",marginBottom:0,children:(0,r.jsx)(c.Z,{lg:14,children:(0,r.jsx)(f.Z,(0,a.Z)((0,u.Z)({hideDivider:!0,leftSpace:"0",width:"100%"},p),{children:e.map(function(n,e){return(0,r.jsx)(f.Z.Item,{label:(0,r.jsxs)(r.Fragment,{children:[n.name,n.keybind?(0,r.jsx)(h.Z,{ml:1/3,children:n.keybind.charAt(0)}):null]}),value:"".concat(e)},e)})}))})})}function v(n){var e=n.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{children:(0,r.jsx)(i.Z,{h2:!0,children:"Jackett"})}),(0,r.jsx)(p,{pages:[{name:"indexers",keybind:"i"},{name:"search",keybind:"s"},{name:"cache",keybind:"c"},{name:"logs",keybind:"l"},{name:"settings",keybind:"x"},{name:"logout"},]}),(0,r.jsx)(o.Z,{marginTop:"-0.625rem"}),(0,r.jsx)(s,{children:e})]})}},89649:function(n,e,t){"use strict";t.d(e,{Z:function(){return o}});var r=t(85893),i=t(2138);function o(n){var e=n.children;return(0,r.jsx)(i.Z,{type:"error",label:"error",mb:2,children:e})}},56942:function(n,e,t){"use strict";t.d(e,{Z:function(){return c}});var r=t(85893),i=t(28195),o=t(27685);function c(n){var e=n.children;return(0,r.jsx)(i.Z,{text:e,placement:"rightStart",hideArrow:!0,children:(0,r.jsx)(o.kIV,{size:16})})}},73931:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return E}});var r=t(85893),i=t(57822),o=t(67458),c=t(73874),s=t(90339),u=t(75526),a=t(89823),l=t(84633),d=t(41761),f=t(4348),h=t(93944),x=t(80731),p=t(47891),v=t(27685),j=t(11163),m=t(67294),g=t(8281),Z=t(13512),y=t(38424),b=t(23171),k=t(41799),C=t(69396),_=t(62457),w=t(23492);function S(n){var e=n.bindings,t=n.setVisible,i=n.remove;return(0,r.jsxs)(_.Z,(0,C.Z)((0,k.Z)({},e),{children:[(0,r.jsx)(_.Z.Title,{children:"Delete Indexer"}),(0,r.jsx)(_.Z.Content,{children:(0,r.jsx)(w.Z,{children:"Are you sure you want to delete this indexer?"})}),(0,r.jsx)(_.Z.Action,{passive:!0,onClick:function(){return t(!1)},children:"Cancel"}),(0,r.jsx)(_.Z.Action,{children:(0,r.jsx)(w.Z,{type:"error",onClick:i,children:"Delete"})})]}))}var P=t(89649),T=t(56942);function E(){var n=(0,y.fZ)(),e=n.data,t=n.loading,k=n.error,C=(0,Z.iC)(!0),_=(0,j.useRouter)(),w=(0,m.useState)([]),E=w[0],I=w[1],N=(0,m.useState)(10),A=N[0];N[1];var F=(0,m.useState)(1),O=F[0],D=F[1],V=(0,m.useState)(1),L=V[0],z=V[1],J=(0,m.useState)(""),R=J[0],X=J[1],K=(0,i.Z)().setToast,U=(0,o.Z)().copy,B=(0,m.useState)(!1),M=B[0],$=B[1],q=(0,c.Z)(),G=(0,m.useState)(""),W=G[0],Y=G[1];(0,m.useEffect)(function(){if(void 0!=e){var n=e.filter(function(n){return n.configured}).concat(e.filter(function(n){return!n.configured}));R.length>0&&(n=e.filter(function(n){return n.name.toLowerCase().startsWith(R.toLowerCase())})),z(Math.round((n.length>0?n.length:e.length)/A)),O>L&&D(1);var t=(O-1)*A;I((n.length>0?n:e).slice(t,t+A))}else D(1),z(1)},[e,O,L,A,R]);var H=function(n){(0,y.m9)(n).finally(function(){return I(E.filter(function(e){return e.id!=n}))})},Q=function(n,t){var r=(null==e?void 0:e.findIndex(function(e){return e.id==n}))||-1;return r<0?Promise.resolve():(t||$(!0),e[r].last_error="testing",(0,y.D9)(n).then(function(n){e[r].last_error="error"!=n.result?"test_success":"test_failed","error"==n.result&&""!=n.error&&K({text:n.error,type:"error",actions:[{name:"report issue",handler:function(){return window.open("https://github.com/Jackett/Jackett/issues/new?template=bug_report.yml&title=".concat(n.error),"_blank")}}],delay:1e4})}).finally(function(){t||$(!1)}))},nn=function(){var n=null==e?void 0:e.filter(function(n){return n.configured});return void 0==n?Promise.resolve():($(!0),Promise.allSettled(n.map(function(n){return Q(n.id,!0)})).finally(function(){return $(!1)}))},ne=function(n,e){return(0,r.jsxs)("span",{children:[(0,r.jsxs)(s.Z,{href:e.site_link,target:"_blank",icon:!0,children:[n,e.description.length>0?(0,r.jsx)(T.Z,{children:e.description}):null]}),(0,r.jsx)(u.Z,{type:"private"==e.type?"error":"semi-private"==e.type?"warning":"success",ml:.5,children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),(0,r.jsx)(u.Z,{type:"secondary",ml:.5,children:e.language})]})},nt=function(n,e){U(n),K({text:"".concat(e," Feed copied."),type:"success"})},nr=function(n,e){return(0,r.jsxs)(a.Z,{type:e.configured?"secondary":"default",disabled:!e.configured,children:[(0,r.jsx)(a.Z.Item,{main:!0,onClick:function(){var n;return nt("".concat(window.location.origin,"/api/v2.0/indexers/").concat(e.id,"/results/torznab/"),"Torznab")},children:"Copy Torznab Feed"}),(0,r.jsx)(a.Z.Item,{onClick:function(){var n,t;return nt((t=(null==C?void 0:C.data)||{},"".concat(window.location.origin,"/api/v2.0/indexers/").concat(e.id,"/results/torznab/api?apikey=").concat(t.api_key,"&t=search&cat=&q=")),"RSS")},children:"Copy RSS Feed"}),e.potatoenabled?(0,r.jsx)(a.Z.Item,{onClick:function(){var n;return nt("".concat(window.location.origin,"/api/v2.0/indexers/").concat(e.id,"/results/potato/"),"Potato")},children:"Copy Potato Feed"}):null]})},ni=function(n,e){return(0,r.jsx)("span",{children:e.caps.filter(function(n){return g.S2.includes(n.Name)}).map(function(n){return n.Name}).join(", ")})},no=function(n,e){return e.configured?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{type:"success",ghost:!0,icon:(0,r.jsx)(v.olm,{}),auto:!0,scale:2/3,px:.6,ml:.5,onClick:function(){return _.push("/search#".concat(e.id))}}),(0,r.jsx)(l.Z,{type:"secondary",ghost:!0,icon:(0,r.jsx)(v.UAh,{}),auto:!0,scale:2/3,px:.6,ml:.5,onClick:function(){return _.push("/configure#".concat(e.id))}}),(0,r.jsx)(l.Z,{type:"error",ghost:!0,icon:(0,r.jsx)(v.rFk,{}),auto:!0,scale:2/3,px:.6,ml:.5,onClick:function(){Y(e.id),q.setVisible(!0)}}),(0,r.jsx)(l.Z,{type:"warning",ghost:!0,icon:""==e.last_error?(0,r.jsx)(v.cS$,{}):"test_success"==e.last_error?(0,r.jsx)(v.JrY,{}):(0,r.jsx)(v.uyG,{}),auto:!0,scale:2/3,px:.6,ml:.5,loading:"testing"==e.last_error,onClick:function(){return Q(e.id)}})]}):(0,r.jsx)(l.Z,{shadow:!0,type:"secondary",icon:(0,r.jsx)(v.v37,{}),onClick:function(){return _.push("/configure#".concat(e.id))},children:"Add indexer"})};return(0,r.jsxs)(b.Z,{children:[k?(0,r.jsx)(P.Z,{children:"Indexers are unavailable, try again later."}):null,(0,r.jsxs)(d.Z.Container,{width:"100%",mb:1,children:[(0,r.jsx)(d.Z,{xs:12,children:(0,r.jsx)(f.Z,{placeholder:"Search for indexers...",width:"100%",scale:4/3,value:R,onChange:function(n){return X(n.target.value)},icon:(0,r.jsx)(v.olm,{}),autoFocus:!0})}),(0,r.jsx)(d.Z,{xs:12,justify:"flex-end",children:(0,r.jsx)(l.Z,{shadow:!0,type:"warning",ghost:!0,icon:(0,r.jsx)(v.cS$,{}),loading:M,onClick:nn,children:"Test Indexers"})})]}),(0,r.jsxs)(h.Z,{data:E,children:[(0,r.jsx)(h.Z.Column,{prop:"name",label:"indexer",render:ne}),(0,r.jsx)(h.Z.Column,{prop:"caps",label:"categories",render:ni}),(0,r.jsx)(h.Z.Column,{prop:"id",label:"feeds",render:nr}),(0,r.jsx)(h.Z.Column,{prop:"type",label:"actions",render:no})]}),t?(0,r.jsx)(x.Z,{children:"Loading indexers"}):null,(0,r.jsx)(d.Z.Container,{justify:"center",mt:2,children:(0,r.jsx)(p.Z,{page:O,count:L,onChange:D})}),(0,r.jsx)(S,{bindings:q.bindings,setVisible:q.setVisible,remove:function(){q.setVisible(!1),H(W)}})]})}}},function(n){n.O(0,[763,932,348,543,158,774,888,179],function(){return n(n.s=29361)}),_N_E=n.O()}]);