# Internal name of the indexer
# (all lower case, typically the display name without any special characters, same as filename)
site: torrentwal

# Display name (The full name of the tracker)
name: TorrentWal (토렌트왈)

description: "Torrent Wal is a free Korean tracker for Korean media."

# Language code of the main language used on the tracker
# See http://ww.linoes.net/en/translator/langcode.htm
language: ko-KR

# Indexer type: # public (no registration required) # semi-private (registration required, but always open)
# private (registration required. Invite/application needed)
type: public 

# Website encoding used by the tracker
encoding: UTF-8

# List of known domains
# (the first one is the default, must end with /)
links: 
  - https://torrentwal.com/

# List of old domains which no longer work
# If one of these URLs is configured it will be automatically replaced with the default one
legacylinks:
  - https://torrentwal1.com/

caps: # Capabilities of the indexer
  categorymappings: # Mapping between the tracker categories and the
                    # Newznab categories.
                    # Not supported by Cardigann.
                    # - id:      The tracker specific category ID.
                    #            Can be a string too.
                    # - cat:     The corresponding newznab predefined category.
                    #            See this list for valid options:
                    #            https://github.com/nZEDb/nZEDb/blob/dev/docs/newznab_api_specification.txt#L608-L695
                    # - desc:    The tracker category name.
                    #            Optional.
                    #            If provided it will be used for a 1:1 mapping between
                    #            tracker and newznab categories.
                    # - default: default flag, can be true or false (default is false)
                    #            Optional.
                    #            Specify if this category should be used as default (if the search query doesn't
                    #            contain any categories).
    - {id: "torrent_movie", cat: Movies, desc: "토렌트영화 (Movies)"}
    - {id: "torrent_variety", cat: TV, desc: "TV예능 (TV Variety Shows)"}
    - {id: "torrent_tv", cat: TV, desc: "TV드라마 (TV Dramas)"}
    - {id: "torrent_docu", cat: TV/Documentary, desc: "다큐/시사 (Documentaries)"}
    - {id: "torrent_sports", cat: TV/Sport, desc: "스포츠 (Sports)"}
    - {id: "torrent_util", cat: PC, desc: "토렌트유틸 (Utilities)"}
    - {id: "torrent_ani", cat: TV/Anime, desc: "애니메이션 (Anime)"}
    - {id: "torrent_song", cat: Audio, desc: "해외음원 (Music)"}
    - {id: "torrent_game", cat: PC/Games, desc: "토렌트게임 (Games)"}
    - {id: "torrent_mid", cat: TV/FOREIGN, desc: 해외TV (Foreign TV)"}
    - {id: "torrent_child", cat: TV, desc: "유아/어린이 (Children's)"}
    - {id: "torrent_etc", cat: Other, desc: "토렌트 기타 (Other)"}
    - {id: "torrent_iphone", cat: PC/Phone-Other, desc: "휴대기기 (Phone Apps)"}
    - {id: "torrent_book", cat: Books, desc: "토렌트도서 (Books)"}

  modes: # Specify which torznab search modes and attributes are supported by the
         # indexers.
         # Implementation note: Jackett doesn't care very much about this but you
         # still should specify the correct modes.
         # Especially don't include imdbid if the tracker doesn't support
         # searching by imdbid.
    search: [q]
    tv-search: [q]
    movie-search: [q]

settings: []

search:
  paths: # list of paths which should be searched
         # For the most trackers just a single path is needed. but some trackers use
         # different pages for e.g. porn or scene and non scene releases.
    - path: "{{ if .Keywords }}bbs/s-1-{{ .Keywords }}{{else}}bbs/s-1-유희열{{end}}"
  rows:
    # selector: table.board_list > tbody > tr.bg1:nth-child(n+3)
    selector: tr.bg1
  fields:
    magnet:
      selector: td:nth-child(1) a[href^="javascript:"]
      attribute: href
      filters:
        - name: replace
          args: ["javascript:Mag_dn('",""]
        - name: replace
          args: ["')",""]
        - name: prepend
          args: "magnet:?xt=urn:btih:"
#   seeders:
#      selector: td:nth-child(2) font:nth-child(2)
#   leechers:
#     selector: td:nth-child(2) font:nth-child(1)
    category:
      selector: td:nth-child(2) a[href^="/bbs/bc.php?bo_table="]
      attribute: href
      filters:
        - name: querystring
          args: bo_table
    title:
      selector: td:nth-child(2) a:last-of-type
    details:
      selector: td:nth-child(2) a:last-of-type
      attribute: href
    date:
      selector: td:nth-child(3)
      filters:
        - name: dateparse
          args: "01-02"
    size:
      selector: td:nth-child(4)
      filters:
        - name: append
          args: "B"
